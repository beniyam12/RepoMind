# Simple RAG API

A lightweight Retrieval-Augmented Generation (RAG) system built with FastAPI, ChromaDB, and OpenAI.  
This project lets you index text or files into a vector database and query them with answers generated by OpenAI models.

---

## Features

- Index plain text or upload files (code, markdown, CSV, etc.) into ChromaDB
- Query the vector store and get context-aware answers
- REST API with Swagger UI at `/docs`
- Simple HTML UI at `/`
- Dockerized for easy setup

---

## Requirements

- Docker & Docker Compose installed
- An [OpenAI API key](https://platform.openai.com/)

---

## Setup & Run

1. **Clone this repo**
   ```bash
   git clone https://github.com/your-username/simple-rag-api.git
   cd simple-rag-api
   ```

2. **Set your API key**
   Export your OpenAI key into the environment:
   ```bash
   export OPENAI_API_KEY="your_api_key_here"
   ```

   Or add it to your shell profile (`.bashrc` / `.zshrc`).

3. **Run with Docker Compose**
   ```bash
   docker compose up -d --build
   ```

4. **Check it's running**
   ```bash
   curl -s http://localhost:8000/openapi.json | jq .
   ```

---

## Endpoints

- **POST /index** – Index a text string  
  Example:
  ```bash
  curl -s -X POST http://localhost:8000/index     -H "Content-Type: application/json"     -d '{"text": "Superman is stronger than Batman"}'
  ```

- **POST /index_file** – Upload and index a file  
  Example:
  ```bash
  curl -s -F "file=@test.txt" http://localhost:8000/index_file
  ```

- **POST /query** – Ask a question with RAG  
  Example:
  ```bash
  curl -s -X POST http://localhost:8000/query     -H "Content-Type: application/json"     -d '{"question": "Who is stronger?", "k": 3}'
  ```

- **GET /** – Minimal HTML UI

- **GET /docs** – Swagger UI

---

## Development

To stop and clean up:
```bash
docker compose down
```

If you edit dependencies in `requirements.txt`, rebuild:
```bash
docker compose up -d --build
```

---

## Notes

- Default embedding model: `all-MiniLM-L6-v2`
- Default LLM: `gpt-4o-mini`
- Data persists in the `chroma/` directory by default
